--==================================
-- VI CAT | AFK + NOCLIP + CAT ICON
--==================================

-- SERVICES
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")
local Stats = game:GetService("Stats")

local player = Players.LocalPlayer

--==================================
-- ANTI AFK
--==================================
player.Idled:Connect(function()
	VirtualUser:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
	task.wait(1)
	VirtualUser:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
end)

--==================================
-- CHARACTER
--==================================
local humanoid
local enabled = false
local noclipEnabled = false
local angle = 0

local function setupChar(char)
	humanoid = char:WaitForChild("Humanoid")
	enabled = false
	noclipEnabled = false
	angle = 0
end

setupChar(player.Character or player.CharacterAdded:Wait())
player.CharacterAdded:Connect(setupChar)

--==================================
-- NOCLIP
--==================================
RunService.Stepped:Connect(function()
	if noclipEnabled and player.Character then
		for _,v in ipairs(player.Character:GetDescendants()) do
			if v:IsA("BasePart") then
				v.CanCollide = false
			end
		end
	end
end)

local function disableNoClip()
	if player.Character then
		for _,v in ipairs(player.Character:GetDescendants()) do
			if v:IsA("BasePart") then
				v.CanCollide = true
			end
		end
	end
end

--==================================
-- GUI
--==================================
local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.Parent = player.PlayerGui

-- MAIN FRAME
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0,240,0,240)
frame.Position = UDim2.new(0.5,-120,0.5,-120)
frame.BackgroundColor3 = Color3.fromRGB(255,170,200)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = gui
Instance.new("UICorner",frame).CornerRadius = UDim.new(0,18)

-- TITLE
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,40)
title.Position = UDim2.new(0,0,0,5)
title.BackgroundTransparency = 1
title.Text = "VI CAT"
title.Font = Enum.Font.GothamBlack
title.TextSize = 22
title.TextStrokeTransparency = 0.2
title.Parent = frame

task.spawn(function()
	local h = 0
	while true do
		h = (h + 0.01) % 1
		title.TextColor3 = Color3.fromHSV(h,1,1)
		task.wait(0.03)
	end
end)

-- MINIMIZE BUTTON
local miniBtn = Instance.new("TextButton")
miniBtn.Size = UDim2.new(0,30,0,30)
miniBtn.Position = UDim2.new(1,-70,0,5)
miniBtn.Text = "-"
miniBtn.Font = Enum.Font.GothamBlack
miniBtn.TextSize = 22
miniBtn.BackgroundColor3 = Color3.fromRGB(255,100,150)
miniBtn.TextColor3 = Color3.new(1,1,1)
miniBtn.BorderSizePixel = 0
miniBtn.Parent = frame
Instance.new("UICorner",miniBtn).CornerRadius = UDim.new(1,0)

-- CLOSE
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0,30,0,30)
closeBtn.Position = UDim2.new(1,-35,0,5)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 16
closeBtn.BackgroundColor3 = Color3.fromRGB(255,80,120)
closeBtn.TextColor3 = Color3.new(1,1,1)
closeBtn.BorderSizePixel = 0
closeBtn.Parent = frame
Instance.new("UICorner",closeBtn).CornerRadius = UDim.new(1,0)

-- AFK BUTTON
local afkBtn = Instance.new("TextButton")
afkBtn.Size = UDim2.new(0.9,0,0,45)
afkBtn.Position = UDim2.new(0.05,0,0,60)
afkBtn.Text = "ØªØ´ØºÙŠÙ„ AFK"
afkBtn.Font = Enum.Font.GothamBold
afkBtn.TextSize = 15
afkBtn.BackgroundColor3 = Color3.fromRGB(255,90,150)
afkBtn.TextColor3 = Color3.new(1,1,1)
afkBtn.BorderSizePixel = 0
afkBtn.Parent = frame
Instance.new("UICorner",afkBtn).CornerRadius = UDim.new(0,14)

-- NOCLIP BUTTON
local noclipBtn = Instance.new("TextButton")
noclipBtn.Size = UDim2.new(0.9,0,0,45)
noclipBtn.Position = UDim2.new(0.05,0,0,115)
noclipBtn.Text = "NoClip : OFF"
noclipBtn.Font = Enum.Font.GothamBold
noclipBtn.TextSize = 15
noclipBtn.BackgroundColor3 = Color3.fromRGB(255,120,170)
noclipBtn.TextColor3 = Color3.new(1,1,1)
noclipBtn.BorderSizePixel = 0
noclipBtn.Parent = frame
Instance.new("UICorner",noclipBtn).CornerRadius = UDim.new(0,14)

-- INFO
local info = Instance.new("TextLabel")
info.Size = UDim2.new(1,-20,0,60)
info.Position = UDim2.new(0,10,1,-65)
info.BackgroundTransparency = 1
info.Font = Enum.Font.Gotham
info.TextSize = 13
info.TextColor3 = Color3.new(1,1,1)
info.TextStrokeTransparency = 0.4
info.TextWrapped = true
info.Parent = frame

--==================================
-- CAT ICON
--==================================
local cat = Instance.new("TextButton")
cat.Size = UDim2.new(0,60,0,60)
cat.Position = UDim2.new(0.5,-30,0.5,-30)
cat.Text = "ğŸ±"
cat.TextSize = 32
cat.Font = Enum.Font.GothamBold
cat.BackgroundColor3 = Color3.fromRGB(255,150,190)
cat.TextColor3 = Color3.new(1,1,1)
cat.Visible = false
cat.Active = true
cat.Draggable = true
cat.BorderSizePixel = 0
cat.Parent = gui
Instance.new("UICorner",cat).CornerRadius = UDim.new(1,0)

--==================================
-- BUTTON LOGIC
--==================================
miniBtn.MouseButton1Click:Connect(function()
	frame.Visible = false
	cat.Visible = true
end)

cat.MouseButton1Click:Connect(function()
	frame.Visible = true
	cat.Visible = false
end)

closeBtn.MouseButton1Click:Connect(function()
	enabled = false
	noclipEnabled = false
	disableNoClip()
	gui:Destroy()
end)

afkBtn.MouseButton1Click:Connect(function()
	if not humanoid then return end
	enabled = not enabled
	if enabled then
		humanoid.WalkSpeed = 8
		afkBtn.Text = "Ø¥ÙŠÙ‚Ø§Ù AFK"
	else
		angle = 0
		humanoid:Move(Vector3.zero,false)
		afkBtn.Text = "ØªØ´ØºÙŠÙ„ AFK"
	end
end)

noclipBtn.MouseButton1Click:Connect(function()
	noclipEnabled = not noclipEnabled
	if noclipEnabled then
		noclipBtn.Text = "NoClip : ON"
	else
		noclipBtn.Text = "NoClip : OFF"
		disableNoClip()
	end
end)

--==================================
-- AFK MOVE
--==================================
RunService.RenderStepped:Connect(function(dt)
	if enabled and humanoid then
		angle += dt * 1.5
		humanoid:Move(Vector3.new(math.cos(angle),0,math.sin(angle)),false)
	end
end)

--==================================
-- INFO UPDATE
--==================================
local startTime = tick()
local fps, frames = 0, 0
local last = tick()

RunService.RenderStepped:Connect(function()
	frames += 1
	if tick() - last >= 1 then
		fps = frames
		frames = 0
		last = tick()
	end
end)

task.spawn(function()
	while task.wait(1) do
		local t = math.floor(tick() - startTime)
		local m,s = math.floor(t/60), t%60
		local ping = math.floor(
			Stats.Network.ServerStatsItem["Data Ping"]:GetValue()
		)
		info.Text =
			"â± AFK: "..m.."m "..s.."s\n"..
			"ğŸ® FPS: "..fps.."\n"..
			"ğŸ“¡ Ping: "..ping.." ms"
	end
end)
